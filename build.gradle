plugins {
    id "com.github.node-gradle.node" version "2.2.4"
}

node {
    download = true
    version = project.nodeVersion
    distBaseUrl = "https://nodejs.org/dist"
    npmInstallCommand = "install"
    workDir = file("${project.projectDir}/.gradle/nodejs")
    npmWorkDir = file("${project.projectDir}/.gradle/npm")
}

task registrySetup {
    doLast {
        File npmrc = file(System.properties['user.home'] + '/.npmrc')
        npmrc.delete()
        npmrc << project.registryUrl + "npm-private/:_authToken="+ project.authToken
    }
}